<div class="offers-container">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>{{ 'OFFERS.LOADING' | translate }}</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-state">
        <div class="error-icon">‚ö†Ô∏è</div>
        <h2>{{ 'OFFERS.ERROR.TITLE' | translate }}</h2>
        <p>{{ error }}</p>
        <button class="btn-back" (click)="goBack()">
            <span class="icon">‚Üê</span>
            {{ 'OFFERS.BACK' | translate }}
        </button>
    </div>

    <!-- Offer Details -->
    <div *ngIf="serviceRequest && !loading && !error" class="offer-card">
        <!-- Header -->
        <div class="offer-header">
            <button class="btn-back-icon" (click)="goBack()">
                <span>‚Üê</span>
            </button>
            <h1>{{ 'OFFERS.TITLE' | translate }}</h1>
        </div>

        <!-- Image Section -->
        <div class="offer-image-section">
            <img [src]="getImageUrl()" [alt]="serviceRequest.description" class="offer-image">
            <div class="price-badge">
                <span class="price-label">{{ 'OFFERS.SUGGESTED_PRICE' | translate }}</span>
                <span class="price-value">{{ serviceRequest.suggestedPrice || ('OFFERS.NOT_SPECIFIED' | translate) }} EGP</span>
            </div>
        </div>

        <!-- Details Section -->
        <div class="offer-details">
            <div class="detail-item">
                <div class="detail-icon">üìù</div>
                <div class="detail-content">
                    <h3>{{ 'OFFERS.DESCRIPTION' | translate }}</h3>
                    <p>{{ serviceRequest.description }}</p>
                </div>
            </div>

            <div class="detail-item">
                <div class="detail-icon">üìç</div>
                <div class="detail-content">
                    <h3>{{ 'OFFERS.LOCATION' | translate }}</h3>
                    <p>{{ serviceRequest.location || ('OFFERS.NOT_SPECIFIED' | translate) }}</p>
                </div>
            </div>

            <div class="detail-item">
                <div class="detail-icon">üïê</div>
                <div class="detail-content">
                    <h3>{{ 'OFFERS.SERVICE_START_TIME' | translate }}</h3>
                    <p>{{ formatDate(serviceRequest.serviceStartTime) }}</p>
                </div>
            </div>

            <div class="detail-item">
                <div class="detail-icon">‚ÑπÔ∏è</div>
                <div class="detail-content">
                    <h3>{{ 'OFFERS.STATUS' | translate }}</h3>
                    <span class="status-badge" [ngClass]="getStatusClass(serviceRequest.status)">
                        {{ formatStatus(serviceRequest.status) | translate }}
                    </span>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="offer-actions" *ngIf="!actionTaken && !shouldHideButtons">
            <button class="btn btn-accept" (click)="onAccept()">
                <span class="btn-icon">‚úì</span>
                <span class="btn-text">{{ 'OFFERS.ACTIONS.ACCEPT' | translate }}</span>
            </button>

            <button class="btn btn-reject" (click)="onReject()">
                <span class="btn-icon">‚úï</span>
                <span class="btn-text">{{ 'OFFERS.ACTIONS.REJECT' | translate }}</span>
            </button>

            <button class="btn btn-new-offer" (click)="onNewOffer()" *ngIf="isCraftsman">
                <span class="btn-icon">üí∞</span>
                <span class="btn-text">{{ 'OFFERS.ACTIONS.NEW_OFFER' | translate }}</span>
            </button>
        </div>
    </div>
</div>